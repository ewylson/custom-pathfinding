[gd_scene load_steps=5 format=4 uid="uid://c8s3d78e03mu5"]

[ext_resource type="TileSet" uid="uid://djxj1874d0pu7" path="res://demo/tilemap/prototype_tileset.res" id="1_2dgm5"]
[ext_resource type="PackedScene" uid="uid://bgvoxurcigu66" path="res://demo/entity/kinds/enemy_character/enemy_character.tscn" id="2_cpltm"]
[ext_resource type="PackedScene" uid="uid://c5clljdb485su" path="res://demo/entity/kinds/playable_character/playable_character.tscn" id="3_25usv"]

[sub_resource type="GDScript" id="GDScript_ahcg6"]
script/source = "extends Node


func _ready() -> void:
	$EnemyCharacter.pathfinder.pathdinding_map = PathfindingMap.new($TileMapLayers/GroundLayer, __get_impassable_cells())
	return


func __get_impassable_cells() -> Array[Vector2i]:
	var impassable_cells : Array[Vector2i]
	for cell : Vector2i in $TileMapLayers/GroundLayer.get_used_cells():
		if cell in $TileMapLayers/ObstaclesLayer.get_used_cells():
			impassable_cells.append(cell)
	return impassable_cells
"

[node name="DemoLevel" type="Node"]
script = SubResource("GDScript_ahcg6")

[node name="TileMapLayers" type="Node2D" parent="."]

[node name="GroundLayer" type="TileMapLayer" parent="TileMapLayers"]
tile_map_data = PackedByteArray("AAAPAAYAAAAAAAIAAAAPAAcAAAAAAAIAAAAPAAgAAAAAAAIAAAAPAAkAAAAAAAIAAAAPAAoAAAAAAAIAAAAPAAsAAAAAAAIAAAAPAAwAAAAAAAIAAAAPAA0AAAAAAAIAAAAPAA4AAAAAAAIAAAAPAA8AAAAAAAIAAAAQAAYAAAAAAAIAAAAQAAcAAAAAAAIAAAAQAAgAAAAAAAIAAAAQAAkAAAAAAAIAAAAQAAoAAAAAAAIAAAAQAAsAAAAAAAIAAAAQAAwAAAAAAAIAAAAQAA0AAAAAAAIAAAAQAA4AAAAAAAIAAAAQAA8AAAAAAAIAAAARAAYAAAAAAAIAAAARAAcAAAAAAAIAAAARAAgAAAAAAAIAAAARAAkAAAAAAAIAAAARAAoAAAAAAAIAAAARAAsAAAAAAAIAAAARAAwAAAAAAAIAAAARAA0AAAAAAAIAAAARAA4AAAAAAAIAAAARAA8AAAAAAAIAAAASAAYAAAAAAAIAAAASAAcAAAAAAAIAAAASAAgAAAAAAAIAAAASAAkAAAAAAAIAAAASAAoAAAAAAAIAAAASAAsAAAAAAAIAAAASAAwAAAAAAAIAAAASAA0AAAAAAAIAAAASAA4AAAAAAAIAAAASAA8AAAAAAAIAAAATAAYAAAAAAAIAAAATAAcAAAAAAAIAAAATAAgAAAAAAAIAAAATAAkAAAAAAAIAAAATAAoAAAAAAAIAAAATAAsAAAAAAAIAAAATAAwAAAAAAAIAAAATAA0AAAAAAAIAAAATAA4AAAAAAAIAAAATAA8AAAAAAAIAAAAUAAYAAAAAAAIAAAAUAAcAAAAAAAIAAAAUAAgAAAAAAAIAAAAUAAkAAAAAAAIAAAAUAAoAAAAAAAIAAAAUAAsAAAAAAAIAAAAUAAwAAAAAAAIAAAAUAA0AAAAAAAIAAAAUAA4AAAAAAAIAAAAUAA8AAAAAAAIAAAAVAAYAAAAAAAIAAAAVAAcAAAAAAAIAAAAVAAgAAAAAAAIAAAAVAAkAAAAAAAIAAAAVAAoAAAAAAAIAAAAVAAsAAAAAAAIAAAAVAAwAAAAAAAIAAAAVAA0AAAAAAAIAAAAVAA4AAAAAAAIAAAAVAA8AAAAAAAIAAAAWAAYAAAAAAAIAAAAWAAcAAAAAAAIAAAAWAAgAAAAAAAIAAAAWAAkAAAAAAAIAAAAWAAoAAAAAAAIAAAAWAAsAAAAAAAIAAAAWAAwAAAAAAAIAAAAWAA0AAAAAAAIAAAAWAA4AAAAAAAIAAAAWAA8AAAAAAAIAAAAXAAYAAAAAAAIAAAAXAAcAAAAAAAIAAAAXAAgAAAAAAAIAAAAXAAkAAAAAAAIAAAAXAAoAAAAAAAIAAAAXAAsAAAAAAAIAAAAXAAwAAAAAAAIAAAAXAA0AAAAAAAIAAAAXAA4AAAAAAAIAAAAXAA8AAAAAAAIAAAAYAAYAAAAAAAIAAAAYAAcAAAAAAAIAAAAYAAgAAAAAAAIAAAAYAAkAAAAAAAIAAAAYAAoAAAAAAAIAAAAYAAsAAAAAAAIAAAAYAAwAAAAAAAIAAAAYAA0AAAAAAAIAAAAYAA4AAAAAAAIAAAAYAA8AAAAAAAIAAAA=")
tile_set = ExtResource("1_2dgm5")

[node name="ObstaclesLayer" type="TileMapLayer" parent="TileMapLayers"]
tile_map_data = PackedByteArray("AAAPAAYAAAABAAEAAAAPAAcAAAABAAEAAAAPAAgAAAABAAEAAAAPAAkAAAABAAEAAAAPAAoAAAABAAEAAAASAAkAAAABAAEAAAATAAkAAAABAAEAAAAUAAkAAAABAAEAAAAVAAkAAAABAAEAAAAWAAkAAAABAAEAAAAUAAsAAAABAAEAAAAUAAwAAAABAAEAAAAUAA0AAAABAAEAAAASAA8AAAABAAEAAAATAA8AAAABAAEAAAAUAA8AAAABAAEAAAAVAA8AAAABAAEAAAAWAA8AAAABAAEAAAAXAAwAAAABAAEAAAARAA0AAAABAAEAAAAUAAcAAAABAAEAAAAXAAYAAAABAAEAAAAYAAYAAAABAAEAAAAYAAcAAAABAAEAAAAPAA4AAAABAAEAAAAPAA8AAAABAAEAAAAQAA8AAAABAAEAAAAPAAsAAAABAAEAAAAPAAwAAAABAAEAAAAPAA0AAAABAAEAAAARAA8AAAABAAEAAAAXAA8AAAABAAEAAAAYAA8AAAABAAEAAAAYAA4AAAABAAEAAAAYAA0AAAABAAEAAAAYAAwAAAABAAEAAAAYAAsAAAABAAEAAAAYAAoAAAABAAEAAAAYAAkAAAABAAEAAAAYAAgAAAABAAEAAAAWAAYAAAABAAEAAAAVAAYAAAABAAEAAAAUAAYAAAABAAEAAAATAAYAAAABAAEAAAASAAYAAAABAAEAAAARAAYAAAABAAEAAAAQAAYAAAABAAEAAAATAAsAAAABAAEAAAA=")
tile_set = ExtResource("1_2dgm5")

[node name="EnemyCharacter" parent="." node_paths=PackedStringArray("movement_target") instance=ExtResource("2_cpltm")]
position = Vector2(296, 120)
movement_target = NodePath("../PlayableCharacter")

[node name="Pathfinder2D" parent="EnemyCharacter" index="2"]
heuristic = 0
diagonal_mode = 3
debug_enabled = true

[node name="PlayableCharacter" parent="." instance=ExtResource("3_25usv")]
position = Vector2(312, 216)

[editable path="EnemyCharacter"]
